<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Family Platformer</title>
  <style>
    html, body { margin:0; padding:0; background:#111; height:100%; }
    #game { width:100%; height:100%; display:flex; align-items:center; justify-content:center; }
    canvas { image-rendering: pixelated; }
    #debug {
      position:fixed; left:0; right:0; bottom:0;
      max-height:45%; overflow:auto;
      background:rgba(0,0,0,.85); color:#0f0;
      font:12px monospace; padding:10px; z-index:9999;
      white-space:pre-wrap;
    }
  </style>
</head>
<body>
  <div id="game"></div>
  <div id="debug">Debug:\n</div>

  <script>
    const dbg = (m)=>document.getElementById("debug").textContent += m + "\n";
    dbg("index.html loaded OK ✅");

    window.addEventListener("error", (e) => {
      dbg("ERROR: " + (e.message || e.error));
    });
  </script>

  <!-- 1) Try Phaser CDN -->
  <script>
    dbg("Loading Phaser CDN...");
  </script>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js"></script>

  <!-- 2) If CDN fails, load local Phaser -->
  <script>
    dbg("Phaser after CDN = " + typeof Phaser);
    if (typeof Phaser === "undefined") {
      dbg("CDN blocked ❌ -> loading local /game/phaser.min.js ...");
      const s = document.createElement("script");
      s.src = "/game/phaser.min.js";
      s.onload = () => dbg("Local Phaser loaded ✅ typeof Phaser=" + typeof Phaser);
      s.onerror = () => dbg("Local Phaser FAILED ❌ (phaser.min.js not found)");
      document.head.appendChild(s);
    }
  </script>

  <!-- 3) Load main.js (game logic) -->
  <script>
    dbg("Loading /game/main.js ...");
  </script>
  <script src="/game/main.js"></script>

  <script>
    dbg("main.js tag loaded (if no error above) ✅");
  </script>
</body>
</html>
